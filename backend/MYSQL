CREATE DATABASE NAF;

USE NAF;

CREATE TABLE USUARIO(
ID int PRIMARY KEY AUTO_INCREMENT,
NOME varchar(100),
EMAIL varchar(100) UNIQUE,
SENHA varchar(100),
DATA_CADASTRO TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE UNIDADE (
ID INT PRIMARY KEY,
NOME VARCHAR(10)
);

INSERT INTO UNIDADE (ID, NOME) VALUES
(1, 'kg'),
(2, 'g'),
(3, 'L'),
(4, 'ml');

CREATE TABLE MATERIA_PRIMA(
ID int PRIMARY KEY AUTO_INCREMENT,
ID_USUARIO int,
NOME varchar(100),
QUANTIDADE double,
VALOR_UNITARIO double,
ID_UNIDADE int,
FOREIGN KEY(ID_UNIDADE) REFERENCES UNIDADE(ID),
FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID)
);

CREATE TABLE DESPESAS(
ID int PRIMARY KEY AUTO_INCREMENT,
ID_USUARIO int,
NOME varchar(100),
VALOR_MENSAL double,
FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID)
);

CREATE TABLE CUSTOS_OPERACIONAIS(
ID int PRIMARY KEY AUTO_INCREMENT,
ID_USUARIO int,
NOME varchar(100),
VALOR_MENSAL double,
FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID)
);

CREATE TABLE PRODUTO(
ID INT PRIMARY KEY AUTO_INCREMENT,
ID_UNIDADE int,
ID_USUARIO int,
NOME varchar(100),
FOREIGN KEY(ID_UNIDADE) REFERENCES UNIDADE(ID),
FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID)
);

CREATE TABLE PRODUTO_MP(
PRIMARY KEY (ID_PRODUTO, ID_MP),
ID_PRODUTO int,
ID_MP int,
QUANTIDADE_MP double,
CUSTO_INGREDIENTE double,
FOREIGN KEY(ID_PRODUTO) REFERENCES PRODUTO(ID),
FOREIGN KEY(ID_MP) REFERENCES MATERIA_PRIMA(ID)
);
